<!DOCTYPE html>
<html>
    <head>
<meta charset="utf-8">
    <title>Websocket Example -- Cowboy Elixir Example</title>
    <link href='/static/css/styles.css' rel='stylesheet' type='text/css'/>
    <script src="/static/js/jquery-1.7.2.min.js"></script>
    <script src="http://echarts.baidu.com/dist/echarts.js"></script>
  </head>
  <body>
    <div id='main' style="width: 600px;height:400px;">
    </div>
    <!-- script src="/static/js/ws_test.js"></script-->
    <script>
     var options = {
         backgroundColor: '#eee',
         animation: false,
         title: {
             text: '上证指数',
             left: 0
         },
         tooltip: {
             trigger: 'axis',
             axisPointer: {
                 type: 'cross'
             },
backgroundColor: 'rgba(245, 245, 245, 0.8)',
            borderWidth: 1,
            borderColor: '#ccc',
            padding: 10,
            textStyle: {
                color: '#000'
            },
            position: function (pos, params, el, elRect, size) {
                var obj = {top: 10};
                obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30;
                return obj;
            },
            extraCssText: 'width: 170px'
         },
         legend: {
             data: ['日K', 'MA5', 'MA10', 'MA20', 'MA30'],
             left: 'center',
             bottom: 10
         },
         axisPointer: {
             link: {xAxisIndex: 'all'},
             label: {
                 backgroundColor: '#777'
             }
         },
/*toolbox: {
feature: {
                dataZoom: {
                    yAxisIndex: false
                },
                brush: {
                    type: ['lineX', 'clear']
                }
     }
     },
         */
brush: {
            xAxisIndex: 'all',
            brushLink: 'all',
            outOfBrush: {
                colorAlpha: 0.1
            }
        },
         grid: [{
             left: '10%',
             right: '8%',
             height: '50%'
         },{
             left: '10%',
             right: '8%',
             top: '70%',
             height: '10%'
         }],
         xAxis: [{
             type: 'category',
             data:[],
             scale: false,
             boundaryGap : false,
             axisLine: {onZero: false},
             splitLine: {show: false},
             splitNumber: 20,
             min: 'dataMin',
             max: 'dataMax',
             }, {
                     type: 'category',
                     data: [],
                     gridIndex: 1,
                     scale: true,
                     boundaryGap : false,
                     axisLine: {onZero: false},
                     axisTick: {show: false},
                     splitLine: {show: false},
                     axisLabel: {show: false},
                     splitNumber: 20,
                     min: 'dataMin',
                     max: 'dataMax',
                     axisPointer: {
                         label: {
                             formatter: function (params) {
                                 var seriesValue = (params.seriesData[0] || {}).value;
                                 return params.value
                                      + (seriesValue != null
                                       ? '\n' + echarts.format.addCommas(seriesValue)
                                       : ''
                                      );
                             }
                         }
                     }
                 }
         ],
         yAxis: [{
             scale: true,
             splitArea: {
                 show: true
             }}, {
                 scale: true,
                 gridIndex: 1,
                 splitNumber: 2,
                 axisLabel: {show: false},
                 axisLine: {show: true},
                 axisTick: {show: false},
                 splitLine: {show: false}
             }],
         dataZoom: [
             {
                 type: 'inside',
                 start: 0,
                 end: 100
             },
             {
                 show: true,
                 type: 'slider',
                 y: '90%',
                 start: 0,
                 end: 100
             }
         ],
         series: [
             {
                 name: '日K',
                 type: 'candlestick',
                 barWidth: 10,
                 barMinWidth: 10,
                 barMaxWidth: 20,
itemStyle: {
         normal: {
             color: 'rgb(25,179,76)',
             color0: 'rgb(179,49,32)',
                        borderColor: null,
                        borderColor0: null
                    }
     },
             },
             {
                 name: 'MA5',
                 type: 'line',
                 smooth: true,
                 lineStyle: {
                     normal: {opacity: 0.5}
                 }
             },
             {
                 name: 'MA10',
                 type: 'line',
                 smooth: true,
                 lineStyle: {
                     normal: {opacity: 0.5}
                 }
             },
             {
                 name: 'MA20',
                 type: 'line',
                 smooth: true,
                 lineStyle: {
                     normal: {opacity: 0.5}
                 }
             },
             {
                 name: 'MA30',
                 type: 'line',
                 smooth: true,
                 lineStyle: {
                     normal: {opacity: 0.5}
                 }
             },
             {
                 name: 'Volumn',
                 type: 'bar',
                 xAxisIndex: 1,
                                                    yAxisIndex: 1,
                 scale: false,
                 barMaxWidth: 10,
                 barMinWidth: 10
             }
         ]
     };
    </script>
  </body>
</html>
